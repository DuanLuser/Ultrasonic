{% extends "base.html" %}

{% block title %}
<title>设备管理 - 超声波室内障碍物检测系统</title>
{% endblock title %}

{% block content_header %}
<!--span class="h2">设备管理</span-->
{% endblock content_header %}

{% block content %}

<div class="card">
    <div class="card-header">
        <span style="float:left;" class="h4">
            <b>设备管理</b>
        </span>
        <div class="card-tools d-flex align-items-center">
            <a class="btn btn-default btn-sm mx-2"  href='admin/server/device/'><i class="fa fa-edit" aria-hidden="true"></i></a>

            <!--div class="input-group input-group-sm" style="width: 150px;">
                <input type="text" name="table_search" class="form-control float-right" placeholder="Search">

                <div class="input-group-append">
                    <button type="submit" class="btn btn-default"><i class="fas fa-search"></i></button>
                </div>
            </div-->

        </div>
    </div>
    <!-- /.card-header -->
    <div class="card-body table-responsive p-0">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>设备ID</th>
                    <th>监管区域</th>
                    <th>描述</th>
                    <th>创建时间</th>
                    <th>上次在线</th>
                    <th>状态</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% for device in device_list %}
                <tr>
                    <td>{{device.device_id}}</td>
                    <td>{{device.device_name}}</td>
                    <td>{{device.description}}</td>
                    <td>{{device.create_time | date:"Y/m/d H:i:s"}}</td>
                    <td>{{device.last_online_time | date:"Y/m/d H:i:s"}}</td>
                    <td>
                        <p class="h5">
                        {% if device.device_status == 'online' %}
                        <span class="badge badge-success font-weight-normal">在线</span>
                        {% elif device.device_status == 'offline' %}
                        <span class="badge badge-secondary font-weight-normal">离线</span>
                        {% elif device.device_status == 'malfunction' %}
                        <span class="badge badge-danger font-weight-normal">故障</span>
                        {% endif %}
                    </p>
                    </td>
                    <td><a href="{% url 'device_detail' device.device_id %}">详情</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <!-- /.card-body -->
</div>
{% endblock content %}
